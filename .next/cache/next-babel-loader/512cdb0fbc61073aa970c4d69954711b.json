{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\daniel\\\\Documents\\\\react\\\\next-iron-session\\\\pages\\\\login.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport useUser from \"../lib/useUser\";\nimport Layout from \"../components/Layout\";\nimport Form from \"../components/Form\";\nimport fetchJson from \"../lib/fetchJson\";\n\nconst Login = () => {\n  // here we just check if user is already logged in and redirect to profile\n  const {\n    mutateUser\n  } = useUser({\n    redirectTo: \"/profile-sg\",\n    redirectIfFound: true\n  });\n  const {\n    0: errorMsg,\n    1: setErrorMsg\n  } = useState(\"\");\n\n  async function handleSubmit(e) {\n    event.preventDefault();\n    const body = {\n      username: e.currentTarget.username.value\n    };\n\n    try {\n      await mutateUser(fetchJson(\"/api/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      }));\n    } catch (error) {\n      console.error(\"An unexpected error happened:\", error);\n      setErrorMsg(error.data.message);\n    }\n  }\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-324748941\" + \" \" + \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, __jsx(Form, {\n    isLogin: true,\n    errorMessage: errorMsg,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  })), __jsx(_JSXStyle, {\n    id: \"324748941\",\n    __self: this\n  }, \".login.jsx-324748941{max-width:21rem;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZGFuaWVsXFxEb2N1bWVudHNcXHJlYWN0XFxuZXh0LWlyb24tc2Vzc2lvblxccGFnZXNcXGxvZ2luLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5Q2tCLEFBRzJCLGdCQUNGLGNBQ0QsYUFDUyxzQkFDSixrQkFDcEIiLCJmaWxlIjoiQzpcXFVzZXJzXFxkYW5pZWxcXERvY3VtZW50c1xccmVhY3RcXG5leHQtaXJvbi1zZXNzaW9uXFxwYWdlc1xcbG9naW4uanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB1c2VVc2VyIGZyb20gXCIuLi9saWIvdXNlVXNlclwiO1xyXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL0xheW91dFwiO1xyXG5pbXBvcnQgRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtXCI7XHJcbmltcG9ydCBmZXRjaEpzb24gZnJvbSBcIi4uL2xpYi9mZXRjaEpzb25cIjtcclxuXHJcbmNvbnN0IExvZ2luID0gKCkgPT4ge1xyXG4gIC8vIGhlcmUgd2UganVzdCBjaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgbG9nZ2VkIGluIGFuZCByZWRpcmVjdCB0byBwcm9maWxlXHJcbiAgY29uc3QgeyBtdXRhdGVVc2VyIH0gPSB1c2VVc2VyKHtcclxuICAgIHJlZGlyZWN0VG86IFwiL3Byb2ZpbGUtc2dcIixcclxuICAgIHJlZGlyZWN0SWZGb3VuZDogdHJ1ZSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgW2Vycm9yTXNnLCBzZXRFcnJvck1zZ10gPSB1c2VTdGF0ZShcIlwiKTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgdXNlcm5hbWU6IGUuY3VycmVudFRhcmdldC51c2VybmFtZS52YWx1ZSxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgbXV0YXRlVXNlcihcclxuICAgICAgICBmZXRjaEpzb24oXCIvYXBpL2xvZ2luXCIsIHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgICAgICB9KSxcclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBbiB1bmV4cGVjdGVkIGVycm9yIGhhcHBlbmVkOlwiLCBlcnJvcik7XHJcbiAgICAgIHNldEVycm9yTXNnKGVycm9yLmRhdGEubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPExheW91dD5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2dpblwiPlxyXG4gICAgICAgIDxGb3JtIGlzTG9naW4gZXJyb3JNZXNzYWdlPXtlcnJvck1zZ30gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAubG9naW4ge1xyXG4gICAgICAgICAgbWF4LXdpZHRoOiAyMXJlbTtcclxuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgcGFkZGluZzogMXJlbTtcclxuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICBgfTwvc3R5bGU+XHJcbiAgICA8L0xheW91dD5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9naW47XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\daniel\\\\\\\\Documents\\\\\\\\react\\\\\\\\next-iron-session\\\\\\\\pages\\\\\\\\login.jsx */\"));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/daniel/Documents/react/next-iron-session/pages/login.jsx"],"names":["React","useState","useUser","Layout","Form","fetchJson","Login","mutateUser","redirectTo","redirectIfFound","errorMsg","setErrorMsg","handleSubmit","e","event","preventDefault","body","username","currentTarget","value","method","headers","JSON","stringify","error","console","data","message"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAiBL,OAAO,CAAC;AAC7BM,IAAAA,UAAU,EAAE,aADiB;AAE7BC,IAAAA,eAAe,EAAE;AAFY,GAAD,CAA9B;AAKA,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,CAAC,EAAD,CAAxC;;AAEA,iBAAeW,YAAf,CAA4BC,CAA5B,EAA+B;AAC7BC,IAAAA,KAAK,CAACC,cAAN;AAEA,UAAMC,IAAI,GAAG;AACXC,MAAAA,QAAQ,EAAEJ,CAAC,CAACK,aAAF,CAAgBD,QAAhB,CAAyBE;AADxB,KAAb;;AAIA,QAAI;AACF,YAAMZ,UAAU,CACdF,SAAS,CAAC,YAAD,EAAe;AACtBe,QAAAA,MAAM,EAAE,MADc;AAEtBC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFa;AAGtBL,QAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf;AAHgB,OAAf,CADK,CAAhB;AAOD,KARD,CAQE,OAAOQ,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,+BAAd,EAA+CA,KAA/C;AACAb,MAAAA,WAAW,CAACa,KAAK,CAACE,IAAN,CAAWC,OAAZ,CAAX;AACD;AACF;;AAED,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,OAAO,MAAb;AAAc,IAAA,YAAY,EAAEjB,QAA5B;AAAsC,IAAA,QAAQ,EAAEE,YAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAAA;AAAA;AAAA,onFADF;AAgBD,CA9CD;;AAgDA,eAAeN,KAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport useUser from \"../lib/useUser\";\r\nimport Layout from \"../components/Layout\";\r\nimport Form from \"../components/Form\";\r\nimport fetchJson from \"../lib/fetchJson\";\r\n\r\nconst Login = () => {\r\n  // here we just check if user is already logged in and redirect to profile\r\n  const { mutateUser } = useUser({\r\n    redirectTo: \"/profile-sg\",\r\n    redirectIfFound: true,\r\n  });\r\n\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  async function handleSubmit(e) {\r\n    event.preventDefault();\r\n\r\n    const body = {\r\n      username: e.currentTarget.username.value,\r\n    };\r\n\r\n    try {\r\n      await mutateUser(\r\n        fetchJson(\"/api/login\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(body),\r\n        }),\r\n      );\r\n    } catch (error) {\r\n      console.error(\"An unexpected error happened:\", error);\r\n      setErrorMsg(error.data.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"login\">\r\n        <Form isLogin errorMessage={errorMsg} onSubmit={handleSubmit} />\r\n      </div>\r\n      <style jsx>{`\r\n        .login {\r\n          max-width: 21rem;\r\n          margin: 0 auto;\r\n          padding: 1rem;\r\n          border: 1px solid #ccc;\r\n          border-radius: 4px;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}