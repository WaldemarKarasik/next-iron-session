{"ast":null,"code":"export default async function fetchJson(...args) {\n  try {\n    const response = await fetch(...args); // if the server replies, there's always some data in json\n    // if there's a network error, it will throw at the previous line\n\n    const data = await response.json();\n\n    if (response.ok) {\n      return data;\n    }\n\n    const error = new Error(response.statusText);\n    error.response = response;\n    error.data = data;\n    throw error;\n  } catch (error) {\n    if (!error.data) {\n      error.data = {\n        message: error.message\n      };\n    }\n\n    throw error;\n  }\n}","map":{"version":3,"sources":["C:/Users/daniel/Documents/react/next-iron-session/lib/fetchJson.js"],"names":["fetchJson","args","response","fetch","data","json","ok","error","Error","statusText","message"],"mappings":"AAAA,eAAe,eAAeA,SAAf,CAAyB,GAAGC,IAA5B,EAAkC;AAC/C,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGF,IAAJ,CAA5B,CADE,CAGF;AACA;;AACA,UAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;;AAEA,QAAIH,QAAQ,CAACI,EAAb,EAAiB;AACf,aAAOF,IAAP;AACD;;AAED,UAAMG,KAAK,GAAG,IAAIC,KAAJ,CAAUN,QAAQ,CAACO,UAAnB,CAAd;AACAF,IAAAA,KAAK,CAACL,QAAN,GAAiBA,QAAjB;AACAK,IAAAA,KAAK,CAACH,IAAN,GAAaA,IAAb;AACA,UAAMG,KAAN;AACD,GAfD,CAeE,OAAOA,KAAP,EAAc;AACd,QAAI,CAACA,KAAK,CAACH,IAAX,EAAiB;AACfG,MAAAA,KAAK,CAACH,IAAN,GAAa;AAAEM,QAAAA,OAAO,EAAEH,KAAK,CAACG;AAAjB,OAAb;AACD;;AACD,UAAMH,KAAN;AACD;AACF","sourcesContent":["export default async function fetchJson(...args) {\r\n  try {\r\n    const response = await fetch(...args);\r\n\r\n    // if the server replies, there's always some data in json\r\n    // if there's a network error, it will throw at the previous line\r\n    const data = await response.json();\r\n\r\n    if (response.ok) {\r\n      return data;\r\n    }\r\n\r\n    const error = new Error(response.statusText);\r\n    error.response = response;\r\n    error.data = data;\r\n    throw error;\r\n  } catch (error) {\r\n    if (!error.data) {\r\n      error.data = { message: error.message };\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}