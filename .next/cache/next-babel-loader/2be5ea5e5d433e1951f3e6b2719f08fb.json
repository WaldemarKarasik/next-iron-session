{"ast":null,"code":"import { useEffect } from \"react\";\nimport Router from \"next/router\";\nimport useSWR from \"swr\";\nexport default function useUser({\n  redirectTo = false,\n  redirectIfFound = false\n} = {}) {\n  const {\n    data: user,\n    mutate: mutateUser\n  } = useSWR(\"/api/user\");\n  useEffect(() => {\n    // if no redirect needed, just return (example: already on /dashboard)\n    // if user data not yet there (fetch in progress, logged in or not) then don't do anything yet\n    if (!redirectTo || !user) return;\n\n    if ( // If redirectTo is set, redirect if the user was not found.\n    redirectTo && !redirectIfFound && !(user === null || user === void 0 ? void 0 : user.isLoggedIn) || // If redirectIfFound is also set, redirect if the user was found\n    redirectIfFound && (user === null || user === void 0 ? void 0 : user.isLoggedIn)) {\n      Router.push(redirectTo);\n    }\n  }, [user, redirectIfFound, redirectTo]);\n  return {\n    user,\n    mutateUser\n  };\n}","map":{"version":3,"sources":["C:/Users/daniel/Documents/react/next-iron-session/lib/useUser.js"],"names":["useEffect","Router","useSWR","useUser","redirectTo","redirectIfFound","data","user","mutate","mutateUser","isLoggedIn","push"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AAEA,eAAe,SAASC,OAAT,CAAiB;AAC9BC,EAAAA,UAAU,GAAG,KADiB;AAE9BC,EAAAA,eAAe,GAAG;AAFY,IAG5B,EAHW,EAGP;AACN,QAAM;AAAEC,IAAAA,IAAI,EAAEC,IAAR;AAAcC,IAAAA,MAAM,EAAEC;AAAtB,MAAqCP,MAAM,CAAC,WAAD,CAAjD;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd;AACA;AACA,QAAI,CAACI,UAAD,IAAe,CAACG,IAApB,EAA0B;;AAE1B,SACE;AACCH,IAAAA,UAAU,IAAI,CAACC,eAAf,IAAkC,EAACE,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEG,UAAP,CAAnC,IACA;AACCL,IAAAA,eAAe,KAAIE,IAAJ,aAAIA,IAAJ,uBAAIA,IAAI,CAAEG,UAAV,CAJlB,EAKE;AACAT,MAAAA,MAAM,CAACU,IAAP,CAAYP,UAAZ;AACD;AACF,GAbQ,EAaN,CAACG,IAAD,EAAOF,eAAP,EAAwBD,UAAxB,CAbM,CAAT;AAeA,SAAO;AAAEG,IAAAA,IAAF;AAAQE,IAAAA;AAAR,GAAP;AACD","sourcesContent":["import { useEffect } from \"react\";\r\nimport Router from \"next/router\";\r\nimport useSWR from \"swr\";\r\n\r\nexport default function useUser({\r\n  redirectTo = false,\r\n  redirectIfFound = false,\r\n} = {}) {\r\n  const { data: user, mutate: mutateUser } = useSWR(\"/api/user\");\r\n\r\n  useEffect(() => {\r\n    // if no redirect needed, just return (example: already on /dashboard)\r\n    // if user data not yet there (fetch in progress, logged in or not) then don't do anything yet\r\n    if (!redirectTo || !user) return;\r\n\r\n    if (\r\n      // If redirectTo is set, redirect if the user was not found.\r\n      (redirectTo && !redirectIfFound && !user?.isLoggedIn) ||\r\n      // If redirectIfFound is also set, redirect if the user was found\r\n      (redirectIfFound && user?.isLoggedIn)\r\n    ) {\r\n      Router.push(redirectTo);\r\n    }\r\n  }, [user, redirectIfFound, redirectTo]);\r\n\r\n  return { user, mutateUser };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}